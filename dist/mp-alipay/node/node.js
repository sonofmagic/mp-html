"use strict";function t(t,r,i){return r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}Component({data:{ctrl:{}},props:{childs:[],opts:[]},didMount:function(){this.props.onAdd(this)},methods:{noop:function(){},getNode:function(t){for(var r=t.split("_"),i=this.props.childs[r[0]],e=1;e<r.length;e++)i=i.children[r[e]];return i},play:function(t){if(this.root.props.pauseVideo){for(var r=!1,i=t.target.id,e=this.root._videos.length;e--;)this.root._videos[e].id===i?r=!0:this.root._videos[e].pause();if(!r){var s=my.createVideoContext(i,this);s.id=i,this.root._videos.push(s)}}},imgTap:function(t){var r=this.getNode(t.target.dataset.i);if(r.a)return this.linkTap(r.a);if(!r.attrs.ignore&&(this.root.props.onImgtap&&this.root.props.onImgtap(r.attrs),this.root.props.previewImg)){var i=r.i;my.previewImage({current:i,urls:this.root.imgList})}},imgLoad:function(r){var i,e=r.target.dataset.i,s=this.getNode(e);s.w?(this.props.opts[1]&&!this.data.ctrl[e]||-1===this.data.ctrl[e])&&(i=1):i=r.detail.width,i&&this.setData(t({},"ctrl."+e,i))},linkTap:function(t){var r=t.currentTarget?this.getNode(t.currentTarget.dataset.i):{},i=r.attrs||t,e=i.href;this.root.props.onLinktap&&this.root.props.onLinktap(Object.assign({innerText:this.root.getText(r.children||[])},i)),e&&("#"===e[0]?this.root.navigateTo(e.substring(1)).catch(function(){}):e.split("?")[0].includes("://")?this.root.props.copyLink&&my.setClipboard({text:e,success:function(){return my.showToast({content:"链接已复制"})}}):my.navigateTo({url:e,fail:function(){my.switchTab({url:e,fail:function(){}})}}))},mediaError:function(r){var i=r.target.dataset.i,e=this.getNode(i);if("video"===e.name||"audio"===e.name){var s=(this.data.ctrl[i]||0)+1;if(s>e.src.length&&(s=0),s<e.src.length)return this.setData(t({},"ctrl."+i,s))}else"img"===e.name&&this.props.opts[2]&&this.setData(t({},"ctrl."+i,-1));this.root&&this.root.props.onError&&this.root.props.onError({source:e.name,attrs:e.attrs,errMsg:r.detail.errMsg})}}});